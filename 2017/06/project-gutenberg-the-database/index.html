<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>A Project Gutenberg Database for Text Mining
</title><base href="/"><link rel="stylesheet" href="/assets/css/spectre.min.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat|Raleway"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/styles/default.min.css"><link rel="icon" href="/images/favicon.svg" sizes="any" type="image/svg+xml"><style type="text/css">

@media screen and (min-width: 1200px)
{
html
{
  font-size : 23px;
}

}
@media screen and (min-width: 992px)
{
html
{
  font-size : 24px;
}

}
@media screen and (min-width: 768px)
{
html
{
  font-size : 25px;
}

}
@media screen and (min-width: 576px)
{
html
{
  font-size : 27px;
}

}
body
{
  font-family : "Raleway", sans-serif;
}

body.has-docked-nav #main-header
{
  width    : 100%;
  opacity  : 0.94999;
  z-index  : 2;
  position : fixed;
}

#headerWrapper
{
  background-color : #ffffff;
  border-top       : 2px solid #494e8e;
  border-bottom    : 2px solid #494e8e;
}

#headerWrapper header
{
  padding-top    : 0;
  padding-bottom : 0;
  min-height     : 4em;
  margin         : auto auto auto auto;
  max-width      : 65em;
}

#headerWrapper header .nav
{
  flex-direction : row;
}

#headerWrapper header .nav li
{
  margin-top : 0;
}

.container
{
  max-width : 55em;
  padding   : 3em 3em 3em 3em;
}

.header
{
  margin-bottom : 2em;
}

li.pages
{
  list-style-type : none;
  margin-top      : 1em;
}

h1,
h2,
h3,
h4
{
  margin-top : 1em;
}

b
{
  font-size : 1.19999em;
}

main
{
  font-family : "Raleway", sans-serif;
}

main li
{
  list-style-position : outside;
}

.csl-entry
{
  margin-left : 2em;
  text-indent : -2em;
}

figure
{
  text-align : center;
}

figure figcaption
{
  text-align : center;
}

figure img
{
  max-width : 80%;
}


article img
{
  max-width : 80%;
}

span.update p
{
  display : inline;
}

.chip
{
  margin : 0.1rem 0.29999rem 0.1rem 0.29999rem;
}

footer
{
  background-color : #494e8e;
  color            : #fafafa;
}

footer a
{
  color : #ddddec;
}

footer a.icon img
{
  width : 3em;
}

footer .column
{
  display         : flex;
  justify-content : center;
  align-content   : center;
}

footer p
{
  margin-bottom : 0;
}

footer .icons
{
  color      : #fafafa;
  font-size  : 2em;
  display    : flex;
  align-self : center;
}

footer .icons svg:hover
{
  opacity : 0.8;
}

@media screen and (min-width: 576px)
{
footer .icons
{
  flex-direction : column;
}

}
@media screen and (min-width: 992px)
{
footer .icons
{
  flex-direction : row;
}

}
section#greeting
{
  margin-top    : 4em;
  margin-bottom : 2em;
  font-size     : 2em;
}

section#greeting .icons
{
  display         : flex;
  justify-content : space-between;
}

section#greeting .icons img
{
  height     : 4em;
  margin-top : 2em;
}


section#postList li.post
{
  margin-top      : 5em;
  list-style-type : none;
}

section#postList .postTitle
{
  font-size : 2em;
}

@media print
{

html
{
  font-size : 0.9rem;
}

button
{
  display : none;
}

#headerWrapper
{
  display : none;
}

footer
{
  display : none;
}

.container
{
  max-width : none;
  padding   : 0em 0em 0em 0em;
}

table
{
  font-size : 0.8rem;
}

}

/* Generated with Clay, http://fvisser.nl/clay */</style><style type="text/css">@page{margin: 3cm;}</style></head><body><div id="headerWrapper"><header class="navbar"><section class="navbar-section"><a class="navbar-brand" href>Jonathan Reeve: <span>Computational Literary Analysis</span></a></section><section class="navbar-section"><ul class="nav"><li class="nav-item"><a href>posts</a></li><li class="nav-item"><a href="cv">cv</a></li><li class="nav-item"><a href="tags.html">tags</a></li><li class="nav-item"><a href="feed.xml">feed</a></li></ul></section></header></div><div class="container"><h1>A Project Gutenberg Database for Text Mining
</h1><article><p>Posted 2017-06-23</p><p>Project Gutenberg is a large store of public domain electronic texts,
one which has been around since the 70s. Nearly everyone that has
experimented with computational literary analysis has at some point used
their electronic texts. Many digital humanists undoubtedly share my
frustrations with it: its interface is clunky, its metadata is
incomplete, and it’s not very friendly to computational text extraction.
Inspired by David McClure’s textual databases, used at the Stanford
Literary Lab, I decided to fix this by creating a structured database
for Project Gutenberg’s corpus, and augmenting it as much as possible
with publicly-available book data. This database contains the complete
cleaned text of each work, all its associated metadata, and additional
metadata derived from GITenberg and Wikipedia. Here’s an example entry,
Dickens’s novel <em>A Tale of Two Cities</em>:</p>
<pre class="example"><code>LCC                                                                  {PR}
author                                                   Dickens, Charles
authoryearofbirth                                                    1812
authoryearofdeath                                                    1870
downloads                                                           11809
formats                 {&#39;text/plain; charset=utf-8&#39;: &#39;http://www.gute...
id                                                                     98
languages                                                            [en]
lcsh                    {London (England) -- History -- 18th century -...
title                                                A Tale of Two Cities
type                                                                 Text
_repo                                             A-Tale-of-Two-Cities_98
_version                                                            0.2.2
alternative_title                                                     NaN
contributor                                                           NaN
covers                  [{&#39;attribution&#39;: &#39;Alexis Lampley, 2015&#39;, &#39;cove...
creator                 {&#39;author&#39;: {&#39;agent_name&#39;: &#39;Dickens, Charles&#39;, ...
description                                                           NaN
edition_identifiers     {&#39;edition_id&#39;: &#39;http://www.gutenberg.org/ebook...
edition_note                                                          NaN
gutenberg_bookshelf                                    Historical Fiction
gutenberg_issued                                               1994-01-01
gutenberg_type                                                       Text
identifiers                                           {&#39;gutenberg&#39;: &#39;98&#39;}
jmdate                                                         2011-01-23
subjects                [&#39;Historical fiction&#39;, &#39;French -- England -- L...
language_note                                                         NaN
production_note                                                       NaN
publication_date                                               2015-08-01
publication_note                                                      NaN
rights                                                           CC BY-NC
rights_url                 http://creativecommons.org/licenses/by-nc/4.0/
series_note                                                           NaN
summary                                                               NaN
tableOfContents                                                       NaN
titlepage_image                                                       NaN
url                                    http://www.gutenberg.org/ebooks/98
wikipedia                                                             NaN
filename                /run/media/jon/SAMSUNG/gitenberg/A-Tale-of-Two...
releaseDate                                                           NaN
wp_publication_date                                                  1859
wp_subjects             [&#39;Novels_by_Charles_Dickens&#39;, &#39;Victorian_novel...
wp_info                 {&#39;http://www.w3.org/1999/02/22-rdf-syntax-ns#t...
wp_literary_genres                                 [&#39;Historical_fiction&#39;]
</code></pre>
<p>The first few fields contain Project Gutenberg’s own metadata about
the book: the Dickens’s dates of birth and death, for instance. Project
Gutenberg also provides Library of Congress classification and subject
data: PR (British Literature) as well as these subjects:</p>
<pre class="example"><code>&#39;British -- France -- Paris -- Fiction&#39;,
&#39;Executions and executioners -- Fiction&#39;,
&#39;France -- History -- Revolution, 1789-1799 -- Fiction&#39;,
&#39;French -- England -- London -- Fiction&#39;,
&#39;Historical fiction&#39;,
&#39;London (England) -- History -- 18th century -- Fiction&#39;,
&#39;Lookalikes -- Fiction&#39;,
&#39;Paris (France) -- History -- 1789-1799 -- Fiction&#39;,
&#39;War stories&#39;
</code></pre>
<p>Already you can see that this might be useful for corpus generation.
If you’re interested in, say, the properties of novels that deal with
lookalikes, you can easily build a corpus using these subject headings,
and use those texts for your analyses.</p>
<p>To Project Gutenberg’s metadata, I’ve added metadata from GITenberg.
<a href="https://github.com/GITenberg">GITenberg</a>, like my project <a
href="https://github.com/git-lit">Git-Lit</a>, is an initiative to make
editable GitHub repositories for each Project Gutenberg book. They’ve
also enhanced the metadata for these works. <a
href="https://github.com/GITenberg/A-Tale-of-Two-Cities_98">Their
edition of A Tale of Two Cities</a>, for instance, contains <a
href="https://github.com/GITenberg/A-Tale-of-Two-Cities_98/blob/master/book.asciidoc">a
nice ASCIIDOC version of the book</a> which anyone can edit in the
browser, and <a
href="https://github.com/GITenberg/A-Tale-of-Two-Cities_98/blob/master/cover.jpg">a
Creative Commons-licensed cover designed as part of the Recovering the
Classics project</a>. All of this data, as well as a link to the
GITenberg repository itself, is included in the database, along with
GITenberg’s version of the text.</p>
<p>The next few fields come from Wikipedia. I queried DBPedia for the
books with titles and authors similar to those in Project Gutenberg, and
it returned about 1,800 matches. The wp<sub>info</sub> field here
contains the complete structured set of data about the book, which I
then parsed into the more useful individual fields prefixed with <code
class="verbatim">wp_</code>. This includes, for instance, <code
class="verbatim">wp_subjects</code>, the categories to which the book’s
Wikipedia page belongs. For <em>A Tale of Two Cities</em>, this is:</p>
<pre class="example"><code>&#39;Novels_by_Charles_Dickens&#39;, 
&#39;Victorian_novels&#39;, 
&#39;19th-century_novels&#39;, 
&#39;British_novels&#39;, 
&#39;1775_in_fiction&#39;, 
&#39;1859_novels&#39;, 
&#39;Chapman_&amp;_Hall_books&#39;, 
&#39;Novels_adapted_into_radio_programs&#39;, 
&#39;Novels_adapted_into_television_programs&#39;, 
&#39;Novels_adapted_into_operas&#39;, 
&#39;A_Tale_of_Two_Cities&#39;, 
&#39;Novels_adapted_into_plays&#39;, 
&#39;Novels_adapted_into_comics&#39;, 
&#39;Novels_adapted_into_films&#39;, 
&#39;Novels_first_published_in_serial_form&#39;, &#39;Works_originally_published_in_All_the_Year_Round&#39;, 
&#39;Novels_set_in_Paris&#39;, 
&#39;Novels_set_in_London&#39;, 
&#39;Novels_set_in_the_French_Revolution&#39;
</code></pre>
<p>The potential for corpus creation here is immense. For instance, to
get a corpus of all novels that Wikipedia lists as set in London, I can
just run the Pandas query: <code
class="verbatim">df[df.wp_subjects.str.contains('Novels_set_in_London')]</code>,
which returns a table of 46 novels. To get the average year of birth of
the authors in this corpus, I can append <code
class="verbatim">.authordateofbirth.mean()</code> (it’s 1844). By using
this metadata to query other APIs, I can then do fun things like compare
the average Goodreads ratings for novels set in London and in Paris.
(Paris wins, with an average rating of 3.8, compared with an average
rating of 3.5 for London novels.)</p>
<h1 id="corpus-statistics">Corpus Statistics</h1>
<h2 id="subjects">Subjects</h2>
<p>Here are the top ten Project Gutenberg-provided Library of Congress
subject headings, along with the numbers of associated texts:</p>
<pre class="example"><code>(&#39;Fiction&#39;, 1921),
(&#39;Short stories&#39;, 1604),
(&#39;Science fiction&#39;, 1286),
(&#39;Adventure stories&#39;, 789),
(&#39;Historical fiction&#39;, 654),
(&#39;Conduct of life -- Juvenile fiction&#39;, 639),
(&#39;Poetry&#39;, 634),
(&#39;Love stories&#39;, 620),
(&#39;English wit and humor -- Periodicals&#39;, 555),
(&#39;Detective and mystery stories&#39;, 546)
</code></pre>
<p>For those books that could be found on Wikipedia, here are the top
ten Wikipedia categories for those books, along with their counts:</p>
<pre class="example"><code>(&#39;Novels_first_published_in_serial_form&#39;, 247),
(&#39;British_novels_adapted_into_films&#39;, 109),
(&#39;19th-century_American_novels&#39;, 99),
(&#39;Victorian_novels&#39;, 96),
(&#39;British_novels&#39;, 93),
(&#39;Novels_adapted_into_plays&#39;, 92),
(&#39;English_novels&#39;, 88),
(&#39;20th-century_American_novels&#39;, 85),
(&#39;American_science_fiction_novels&#39;, 63),
(&#39;American_novels_adapted_into_films&#39;, 59),
(&#39;19th-century_novels&#39;, 58),
</code></pre>
<p>Other interesting categories include Debut Novels (51), 1915 Novels
(39), Gothic Novels (37) and Novels Adapted into Comics (36). These
categories could easily be used to create sub-corpora. If you’re
interested in, say, differences between American and British science
fiction novels, whether there’s anything unusually characteristic about
1915 novels, or the properties of novels that have been adapted into
comics, it’s easy to construct those experiments using this corpus.
Finally, here are the most common Project Gutenberg “bookshelves”, with
associated text counts:</p>
<pre class="example"><code>[(&#39;Bestsellers, American, 1895-1923&#39;, 225),
 (&quot;Children&#39;s Literature&quot;, 178),
 (&#39;The Mirror of Literature, Amusement, and Instruction&#39;, 174),
 (&quot;Children&#39;s Book Series&quot;, 168),
 (&#39;Historical Fiction&#39;, 164),
 (&#39;US Civil War&#39;, 115),
 (&#39;Best Books Ever Listings&#39;, 110),
 (&quot;Children&#39;s Fiction&quot;, 99),
 (&#39;Movie Books&#39;, 86),
 (&#39;FR Littérature&#39;, 86)]
</code></pre>
<h2 id="it-was-a-dark-and-stormy-night">It was a dark and stormy
night…</h2>
<p>I wasn’t very surprised to find 306 works by Williams Shakespeare in
the Project Gutenberg database, but I found it very surprising that the
next most-represented author is Edward Bulwer Lytton, with 219 texts.
Here are a few more:</p>
<pre class="example"><code>Various                                            3253
Anonymous                                           719
Shakespeare, William                                306
Lytton, Edward Bulwer Lytton, Baron                 219
Ebers, Georg                                        172
Twain, Mark                                         164
Balzac, Honoré de                                   139
Verne, Jules                                        137
Kingston, William Henry Giles                       133
</code></pre>
<h2 id="languages">Languages</h2>
<p>And here are the numbers of texts in Project Gutenberg, by
language:</p>
<pre class="example"><code>English:             43410
French:               2766
Finnish:              1622
German:               1516
Dutch:                 749
Italian:               690
Portuguese:            544
Spanish:               538
Chinese:               425
Modern Greek (1453-):  219
</code></pre>
<h1 id="future-developments">Future Developments</h1>
<p>In the coming months, I’m going to try to generate sub-corpora from
this database, starting with large corpora like American Literature and
British Literature, and moving into more specialized corpora, like
single-author corpora. I’ll make these all available through <a
href="https://github.com/DH-Box/corpus-downloader">the corpus downloader
<code class="verbatim">corpus</code></a> that I’m developing with <a
href="http://dhbox.org">DHBox</a>.</p>
<h1 id="code">Code</h1>
<p>To see the (very messy) code that I used to generate this database,
check out <a
href="https://github.com/JonathanReeve/gitenberg-experiments/blob/master/pr-metadata.ipynb">this
project on GitHub</a>. I’ll release the database itself, as well, as
soon as I can figure out a way to get it inexpensively online. If you
have any ideas for how best to accomplish that, please leave a note in
the comments below!</p></article><hr><p>I welcome your comments and annotations in the Hypothes.is sidebar to the right. →</p><script src="https://hypothes.is/embed.js"></script></div><footer><div class="container"><div class="columns"><div class="column col-8"><p>I believe in openness. This work is licensed under a <a
href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
Commons Attribution-NonCommercial-ShareAlike 4.0 International
License</a>, unless otherwise stated. All content ©Jonathan Reeve 2020.
Hand-coded with love, using exclusively free and open-source software,
including <a href="https://github.com/srid/rib">Rib</a> and <a
href="https://haskell.org/">Haskell</a>. Hosted on <a
href="https://github.com">GitHub</a> and served with <a
href="https://netlify.com">Netlify</a>. Icons by Nhor, via <a
href="https://thenounproject.com">The Noun Project</a>. <a
href="https://www.buymeacoffee.com/vaIVQZH">Buy me a coffee</a> or
support me <a href="https://liberapay.com/JonathanReeve/donate">via
Libera Pay</a> or <a
href="bitcoin:3Qvm1DwzFGk3L1Eb6yeg5Nbc6db8sZUnbK">Bitcoin</a>.</p></div><div class="column col-4"><div class="icons"><a href="http://github.com/JonathanReeve"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="#fafafa" width="3em" height="3em"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48
48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4
1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2
76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7
17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0
0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0
63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8
11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5
18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3
9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6
388 257.4c.1 73.4-44.7 136.3-110.7
158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9
1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3
1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1
1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8
3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6
1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2
3.7 1.3 1.1 1.5 1.1 3.3 0
4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1
1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6
1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"></svg></a><a href="http://twitter.com/j0_0n"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="#fafafa" width="3em" height="3em"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48
48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2
5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8
15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5
29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447
0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5
24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9
15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></svg></a><a href="mailto:jonathan@jonreeve.com"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="#fafafa" width="3em" height="3em"><path d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48
48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM178.117
262.104C87.429 196.287 88.353 196.121 64 177.167V152c0-13.255 10.745-24
24-24h272c13.255 0 24 10.745 24 24v25.167c-24.371 18.969-23.434 19.124-114.117
84.938-10.5 7.655-31.392 26.12-45.883
25.894-14.503.218-35.367-18.227-45.883-25.895zM384 217.775V360c0 13.255-10.745
24-24 24H88c-13.255 0-24-10.745-24-24V217.775c13.958 10.794 33.329 25.236 95.303
70.214 14.162 10.341 37.975 32.145 64.694 32.01 26.887.134 51.037-22.041
64.72-32.025 61.958-44.965 81.325-59.406 95.283-70.199z"></svg></a></div></div></div><script data-goatcounter="https://jonreeve.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><script src="/assets/js/jquery-3.5.1.min.js"></script><script src="/assets/js/main.js"></script><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/highlight.min.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>hljs.initHighlightingOnLoad();</script></div></footer></body></html>